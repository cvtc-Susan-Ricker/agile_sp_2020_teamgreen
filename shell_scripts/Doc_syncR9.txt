#!/bin/bash

# Automate Sync of Documents and Desktop Files and possibly other Directories
#
# Trey Howell, Professional Services Engineer, JAMF Software
#
# Designed and dedicated to Canisius High School

#*****************Variables*****************
# Current user
currentUser=`ls -l /dev/console | awk {'print $3'}`

#Mount EmployeeData Share
if [ -e /Volumes/EmployeeData/$currentUser ]
then
netmount="/Volumes/EmployeeData/$currentUser"
else
mkdir /Volumes/EmployeeData/
mount -t smbfs //ssrv8r2empfs01/employeedata/ /Volumes/EmployeeData/

fi


#Define local share variable for sync
netmount="/Volumes/EmployeeData/$currentUser"

########Directories to Sync, ones for future use or modification will be commented out for now
desksync="/Users/$currentUser/Desktop/"
docsync="/Users/$currentUser/Documents/"
#picsync="/Users/$currentUser/Pictures/"
#movsync="/Users/$currentUser/Movies/"
#
#



#########*****************************Commands do not edit below this *****************************

### Verify if share is mounted if is Sync Folders, the folders that are commented out can be used later with Variables above
if [ -e $netmount ]
then

rsync -r --partial --delete $desksync $netmount/Desktop/
rsync -r --partial --delete $docsync $netmount/Documents/
#rsync -ra --partial --delete $picsync $netmount
#rsync -ra --partial --delete $movsync $netmount 
else
  Logger -t "There has been a problem with the backup."

fi
